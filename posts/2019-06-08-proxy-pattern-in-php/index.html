<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Proxy Design Pattern | Random notes to myself</title><meta name=keywords content><meta name=description content="Proxy Design Pattern First, some definitions.
Wikipedia:
In computer programming, the proxy pattern is a software design pattern. A proxy, in its most general form, is a class functioning as an interface to something else
Design Patterns. Elements of Reusable Object-Oriented Software:
Provide a surrogate or placeholder for another object to control access to it.
There are a few reasons to use Proxy pattern and control access to the underlying object:"><meta name=author content><link rel=canonical href=https://slash3b.github.io/posts/2019-06-08-proxy-pattern-in-php/><link crossorigin=anonymous href=/assets/css/stylesheet.min.6f60056d44d3f7eb69a4bc6c332b59960f3a995802bded244750232f33713c49.css integrity="sha256-b2AFbUTT9+tppLxsMytZlg86mVgCve0kR1AjLzNxPEk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://slash3b.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://slash3b.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://slash3b.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://slash3b.github.io/apple-touch-icon.png><link rel=mask-icon href=https://slash3b.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.100.2"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Proxy Design Pattern"><meta property="og:description" content="Proxy Design Pattern First, some definitions.
Wikipedia:
In computer programming, the proxy pattern is a software design pattern. A proxy, in its most general form, is a class functioning as an interface to something else
Design Patterns. Elements of Reusable Object-Oriented Software:
Provide a surrogate or placeholder for another object to control access to it.
There are a few reasons to use Proxy pattern and control access to the underlying object:"><meta property="og:type" content="article"><meta property="og:url" content="https://slash3b.github.io/posts/2019-06-08-proxy-pattern-in-php/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-06-08T00:00:00+00:00"><meta property="article:modified_time" content="2019-06-08T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Proxy Design Pattern"><meta name=twitter:description content="Proxy Design Pattern First, some definitions.
Wikipedia:
In computer programming, the proxy pattern is a software design pattern. A proxy, in its most general form, is a class functioning as an interface to something else
Design Patterns. Elements of Reusable Object-Oriented Software:
Provide a surrogate or placeholder for another object to control access to it.
There are a few reasons to use Proxy pattern and control access to the underlying object:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://slash3b.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Proxy Design Pattern","item":"https://slash3b.github.io/posts/2019-06-08-proxy-pattern-in-php/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Proxy Design Pattern","name":"Proxy Design Pattern","description":"Proxy Design Pattern First, some definitions.\nWikipedia:\nIn computer programming, the proxy pattern is a software design pattern. A proxy, in its most general form, is a class functioning as an interface to something else\nDesign Patterns. Elements of Reusable Object-Oriented Software:\nProvide a surrogate or placeholder for another object to control access to it.\nThere are a few reasons to use Proxy pattern and control access to the underlying object:","keywords":[],"articleBody":"Proxy Design Pattern First, some definitions.\nWikipedia:\nIn computer programming, the proxy pattern is a software design pattern. A proxy, in its most general form, is a class functioning as an interface to something else\nDesign Patterns. Elements of Reusable Object-Oriented Software:\nProvide a surrogate or placeholder for another object to control access to it.\nThere are a few reasons to use Proxy pattern and control access to the underlying object:\nunderlying object is heavy and it is very costly to create it, e.g. it may do some media processing, multiple HTTP calls, etc. a.k.a. Virtual Proxy access regulation, before giving up the real object, you may want to check first if client/user has an access to it. a.k.a. Protection Proxy executes additional operations when the real subject is accessded(c) Ocramius a.k.a. Smart Reference Example of Virtual Proxy in PHP:\n\u003c?php declare(strict_types=1); // it is usually recommended to bound both classes by a contract // but are going to just extend underlying object and // comply this way with LSP class NetflixFilm { protected $title; protected $path; public function __construct(string $title) { $this-\u003etitle = $title; } public function getFilm() { if ($this-\u003epath == null) { // doing time and/or memory consuming computation here print 'Searching for film...' . PHP_EOL; $this-\u003epath = '/tmp/' . $this-\u003etitle; } return $this-\u003epath; } } class NetflixFilmProxy { protected $title; protected $netflixFilm; public function __construct(string $title) { $this-\u003etitle = $title; } public function getFilm() { if (!$this-\u003enetflixFilm instanceof NetflixFilm) { $this-\u003enetflixFilm = new NetflixFilm($this-\u003etitle); } return $this-\u003enetflixFilm-\u003egetFilm(); } } print 'And underlying object is not instantiated when we create Proxy.' . PHP_EOL; $proxy = new NetflixFilmProxy('Our Planet'); $reflectionObject = new ReflectionObject($proxy); $reflectionProperty = $reflectionObject-\u003egetProperty('netflixFilm'); $reflectionProperty-\u003esetAccessible(true); var_dump($reflectionProperty-\u003egetValue($proxy)); print 'And here it is.' . PHP_EOL; var_dump($proxy-\u003egetFilm()); // heavy instance creation on demand ","wordCount":"294","inLanguage":"en","datePublished":"2019-06-08T00:00:00Z","dateModified":"2019-06-08T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://slash3b.github.io/posts/2019-06-08-proxy-pattern-in-php/"},"publisher":{"@type":"Organization","name":"Random notes to myself","logo":{"@type":"ImageObject","url":"https://slash3b.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://slash3b.github.io accesskey=h title="Random notes to myself (Alt + H)">Random notes to myself</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Proxy Design Pattern</h1><div class=post-meta>June 8, 2019</div></header><div class=post-content><h1 id=proxy-design-pattern>Proxy Design Pattern<a hidden class=anchor aria-hidden=true href=#proxy-design-pattern>#</a></h1><p>First, some definitions.</p><p>Wikipedia:</p><blockquote><p>In computer programming, the proxy pattern is a software design pattern. A proxy, in its most general form, is a class functioning as an interface to something else</p></blockquote><p>Design Patterns. Elements of Reusable Object-Oriented Software:</p><blockquote><p>Provide a surrogate or placeholder for another object to control access to it.</p></blockquote><p>There are a few reasons to use Proxy pattern and control access to the underlying object:</p><ul><li>underlying object is heavy and it is very costly to create it, e.g. it may do some media processing, multiple HTTP calls, etc. a.k.a. <strong>Virtual Proxy</strong></li><li>access regulation, before giving up the real object, you may want to check first if client/user has an access to it. a.k.a. <strong>Protection Proxy</strong></li><li>executes additional operations when the real subject is accessded(c) Ocramius a.k.a. <strong>Smart Reference</strong></li></ul><p>Example of Virtual Proxy in PHP:</p><pre tabindex=0><code>
&lt;?php
declare(strict_types=1);

// it is usually recommended to bound both classes by a contract
// but are going to just extend underlying object and
// comply this way with LSP

class NetflixFilm {

    protected $title;

    protected $path;

    public function __construct(string $title)
    {
        $this-&gt;title = $title;
    }

    public function getFilm()
    {
        if ($this-&gt;path == null) {
            // doing time and/or memory consuming computation here
            print &#39;Searching for film...&#39; . PHP_EOL;
            $this-&gt;path = &#39;/tmp/&#39; . $this-&gt;title;
        }

        return $this-&gt;path;
    }
}

class NetflixFilmProxy {
    protected $title;

    protected $netflixFilm;

    public function __construct(string $title)
    {
        $this-&gt;title = $title;
    }

    public function getFilm()
    {
        if (!$this-&gt;netflixFilm instanceof NetflixFilm) {
            $this-&gt;netflixFilm = new NetflixFilm($this-&gt;title);
        }

        return $this-&gt;netflixFilm-&gt;getFilm();
    }
}

print &#39;And underlying object is not instantiated when we create Proxy.&#39; . PHP_EOL;
$proxy = new NetflixFilmProxy(&#39;Our Planet&#39;);
$reflectionObject = new ReflectionObject($proxy);
$reflectionProperty = $reflectionObject-&gt;getProperty(&#39;netflixFilm&#39;);
$reflectionProperty-&gt;setAccessible(true);

var_dump($reflectionProperty-&gt;getValue($proxy));

print &#39;And here it is.&#39; . PHP_EOL;
var_dump($proxy-&gt;getFilm()); // heavy instance creation on demand
</code></pre></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://slash3b.github.io>Random notes to myself</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>