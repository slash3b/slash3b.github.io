<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Amazing GIT for seasoned developer. | Random notes to myself</title>
<meta name=keywords content>
<meta name=description content="At first, like so many others I didn&rsquo;t use git to full extent, the tool belt of git add, git commit, git push, git pull allowed me to survive through the day. At some point I realized that I need to enforce my GIT knowledge.
In short GIT has an insanely rich eco system of different tools designed to do only one thing but do it very good. This is not a post but rather a set of things I would like to remember about GIT.">
<meta name=author content>
<link rel=canonical href=https://slash3b.github.io/posts/2016-12-11-amazing-git-for-seasoned-developer/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.6f60056d44d3f7eb69a4bc6c332b59960f3a995802bded244750232f33713c49.css integrity="sha256-b2AFbUTT9+tppLxsMytZlg86mVgCve0kR1AjLzNxPEk=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://slash3b.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://slash3b.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://slash3b.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://slash3b.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://slash3b.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.4">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="Amazing GIT for seasoned developer.">
<meta property="og:description" content="At first, like so many others I didn&rsquo;t use git to full extent, the tool belt of git add, git commit, git push, git pull allowed me to survive through the day. At some point I realized that I need to enforce my GIT knowledge.
In short GIT has an insanely rich eco system of different tools designed to do only one thing but do it very good. This is not a post but rather a set of things I would like to remember about GIT.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://slash3b.github.io/posts/2016-12-11-amazing-git-for-seasoned-developer/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2018-06-13T00:00:00+00:00">
<meta property="article:modified_time" content="2018-06-13T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Amazing GIT for seasoned developer.">
<meta name=twitter:description content="At first, like so many others I didn&rsquo;t use git to full extent, the tool belt of git add, git commit, git push, git pull allowed me to survive through the day. At some point I realized that I need to enforce my GIT knowledge.
In short GIT has an insanely rich eco system of different tools designed to do only one thing but do it very good. This is not a post but rather a set of things I would like to remember about GIT.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://slash3b.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Amazing GIT for seasoned developer.","item":"https://slash3b.github.io/posts/2016-12-11-amazing-git-for-seasoned-developer/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Amazing GIT for seasoned developer.","name":"Amazing GIT for seasoned developer.","description":"At first, like so many others I didn\u0026rsquo;t use git to full extent, the tool belt of git add, git commit, git push, git pull allowed me to survive through the day. At some point I realized that I need to enforce my GIT knowledge.\nIn short GIT has an insanely rich eco system of different tools designed to do only one thing but do it very good. This is not a post but rather a set of things I would like to remember about GIT.","keywords":[],"articleBody":"At first, like so many others I didn’t use git to full extent, the tool belt of git add, git commit, git push, git pull allowed me to survive through the day. At some point I realized that I need to enforce my GIT knowledge.\nIn short GIT has an insanely rich eco system of different tools designed to do only one thing but do it very good. This is not a post but rather a set of things I would like to remember about GIT.\nDo you know that there is a way to trace function or a piece of code? In order to see code snippet evolution you have to use this command, specifying start line(2) and end line(20):\ngit log -L 2,20:src/AdminBundle/Controller/AccountController.php  If you want to trace fuction history you may use:\ngit log -L :funcname:src/AdminBundle/Controller/AccountController.php  In my case this worked for class definition but not for methods within, the thing is that GIT doesn’t know a thing about function declaration in the given language. GIT has a set of predefined regular expressions for some languages so we can fix this issue with this one-liner in your repo - echo '*.php diff=php'  .gitattributes. Thus GIT will know PHP better, given line affects git diff command and diff output will be more correct.\nThere is also a slightly different approach to this - you can use so called “pickaxe” filter -S\ngit log -S function_name  It will show commits that contain addition or removal of the given function name. With this filter you can trace back all “evolution” of the function. Note that in case function has some generic name you may end up with ambiguous data.\nAnother interesting command will display all commit names grouped and counted by contributors:\ngit shortlog --no-merges  Instead of writing n’th time about difference between HEAD~ and HEAD^, I will paste here this awesome answer from stackoverflow with some additions:\nHEAD^ : means the parent of HEAD HEAD^^ : 2 commits older than HEAD HEAD^2 : the second parent of HEAD, if HEAD was a merge, otherwise illegal HEAD~ : the parent of HEAD HEAD~~ : 2 commits older than HEAD HEAD~6 : 6 commits older than HEAD HEAD~3^2 : 3 commits older than HEAD and then grab the second parent of merge commit HEAD@{2} : refers to the 3rd listing in the overview of git reflog  More info may be found in the documentation\nImagine that for some reason you have to merge the same piece of code over and over again. In this case GIT can simplify your life a bit, you should turn on git rerere which stands for reuse recorded resolution. Basically it would record khow you did merge and next time will do that for you.\nYou can always create an alias for some ‘missing’ commands like this: git config --global alias.unstage 'reset HEAD --' By the way, recent version of oh-my-zsh http://ohmyz.sh/ has 123 git aliases. For instance, here are some aliases for git log command, so please use oh-my-zsh, they are awesome!\ngke='\\gitk --all $(git log -g --pretty=%h)' glg='git log --stat' glgg='git log --graph'  There is also an interesting possibility to pack the whole repo into the binary file like this: git bundle create repo.bundle HEAD master and then clone it again with git clone repo.bundle repo\nMissing the keys all the time? Autocorrect you typo with delay of 2sec with git config --global help.autocorrect 20\nTo tell git what files are binary you have to edit .gitattributes file and add e.g. *.pbxproj binary\nWith GIT hooks you can establish whatever policy you can dream of, just do remember that git hooks files can not be distributed on project clone, you have to store them in the repository in some folder and then copy to the .git folder with some makefile or anythig else.\nI was always curious what are those signs that appear in the files in case of a conflict , =========, and . These are the conflict markers, and the code between  and ========= is what you have right now. The other half ending in  is what came to you from the server or another branch.\ngit branch --merged shows all the branches that were merged, you can use --no-merged as well.\nLets turn to more adavanced stuff. In short all commands in git can be divided in two groups:\n the ones you use every day, e.g. git add, git commit and etc. are called ‘porcelain’ other low-level commands like git cat-file, git commit-tree and etc. are called ‘plumbing’ commands  Lets have a look at some of plumbing commands. First command is hash-object: with echo 'test content' | git hash-object -w --stdin you’ll get hash sum of the content you passed to the hash-object command. So the hash sum is d670460b4b4aece5915caf5c68d12f560a9fe3e4, first two letters are the name of subdirectory and the least files are the name of created file - .git/objects/d6/70460b4b4aece5915caf5c68d12f560a9fe3e4.\nBy doing git cat-file -p  you can get every recoded state of the file.\nWith git cat-file -p master^{tree} we get the tree which is pointed to by the latest commit. Git tree is essentially the snapshot which contains references to all blobs and sub-trees. Basically all the magic goes through these commands - git update-index adds the files to the staging area and git write-tree creates the tree.\nAt last we should create commit object which contains all meta-information on commit. echo 'first commit' | git commit-tree  will do the trick.\nOne of the most intriguing topics - data recovery is almost always possible. Suppose you did git hard --reset  for a few commits, and you want it back. The easiest way is to use git reflog to get the list of your recent actions or git log -g which gives you the more ample info. Once you get lost commit SHA you can checkout it or create some ‘recovery-branch’ and that is it!\nThere is another powerfull command git fsck --full which checks git database for intergrity.\nDo you have something to add ? Please comment below.\nLinks:\ngit caret and tilde different\n","wordCount":"1023","inLanguage":"en","datePublished":"2018-06-13T00:00:00Z","dateModified":"2018-06-13T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://slash3b.github.io/posts/2016-12-11-amazing-git-for-seasoned-developer/"},"publisher":{"@type":"Organization","name":"Random notes to myself","logo":{"@type":"ImageObject","url":"https://slash3b.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://slash3b.github.io accesskey=h title="Random notes to myself (Alt + H)">Random notes to myself</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
Amazing GIT for seasoned developer.
</h1>
<div class=post-meta>June 13, 2018
</div>
</header>
<div class=post-content><p>At first, like so many others I didn&rsquo;t use git to full extent, the tool belt of <code>git add, git commit, git push, git pull</code>
allowed me to survive through the day. At some point I realized that I need to enforce my GIT knowledge.</p>
<p>In short GIT has an insanely rich eco system of different tools designed to do only one thing but do it very good.
This is not a post but rather a set of things I would like to remember about GIT.</p>
<p>Do you know that there is a way to trace function or a piece of code?
In order to see code snippet evolution you have to use this command, specifying start line(2) and end line(20):</p>
<pre><code>git log -L  2,20:src/AdminBundle/Controller/AccountController.php
</code></pre>
<p>If you want to trace fuction history you may use:</p>
<pre><code>git log -L  :funcname:src/AdminBundle/Controller/AccountController.php
</code></pre>
<p>In my case this worked for class definition but not for methods within, the thing is that GIT doesn&rsquo;t know a thing about function declaration in the given language. GIT has a set of predefined regular expressions for some languages so we can fix this issue with this one-liner in your repo - <code>echo '*.php diff=php' >> .gitattributes</code>. Thus GIT will know PHP better, given line affects git diff command and diff output will be more correct.</p>
<p>There is also a slightly different approach to this - you can use so called &ldquo;pickaxe&rdquo; filter <code>-S</code></p>
<pre><code>git log -S function_name
</code></pre>
<p>It will show commits that contain addition or removal of the given function name. With this filter you can trace back all &ldquo;evolution&rdquo; of the function. Note that in case function has some generic name you may end up with ambiguous data.</p>
<p>Another interesting command will display all commit names grouped and counted by contributors:</p>
<pre><code>git shortlog --no-merges
</code></pre>
<p>Instead of writing n&rsquo;th time about difference between HEAD~ and HEAD^, I will paste here <a href=http://>this</a> awesome answer from stackoverflow with some additions:</p>
<pre><code>HEAD^    : means the parent of HEAD
HEAD^^   : 2 commits older than HEAD
HEAD^2   : the second parent of HEAD, if HEAD was a merge, otherwise illegal

HEAD~    : the parent of HEAD
HEAD~~   : 2 commits older than HEAD
HEAD~6   : 6 commits older than HEAD

HEAD~3^2 : 3 commits older than HEAD and then grab the second parent of merge commit

HEAD@{2} : refers to the 3rd listing in the overview of git reflog
</code></pre>
<p>More info may be found in the <a href=https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection>documentation</a></p>
<p>Imagine that for some reason you have to merge the same piece of code over and over again. In this case GIT can simplify your life a bit, you should turn on <code>git rerere</code> which stands for reuse recorded resolution. Basically it would record khow you did merge and next time will do that for you.</p>
<p>You can always create an alias for some &lsquo;missing&rsquo; commands like this:
<code>git config --global alias.unstage 'reset HEAD --'</code>
By the way, recent version of oh-my-zsh <a href=http://ohmyz.sh/>http://ohmyz.sh/</a> has 123 git aliases.
For instance, here are some aliases for git log command, so please use oh-my-zsh, they are awesome!</p>
<pre><code>gke='\gitk --all $(git log -g --pretty=%h)'
glg='git log --stat'
glgg='git log --graph'
</code></pre>
<p>There is also an interesting possibility to pack the whole repo into the binary file like this:
<code>git bundle create repo.bundle HEAD master</code>
and then clone it again with <code>git clone repo.bundle repo</code></p>
<p>Missing the keys all the time? Autocorrect you typo with delay of 2sec with <code>git config --global help.autocorrect 20</code></p>
<p>To tell git what files are binary you have to edit .gitattributes file and add e.g. <code>*.pbxproj binary</code></p>
<p>With GIT hooks you can establish whatever policy you can dream of, just do remember that git hooks files can not be distributed on project clone, you have to store them in the repository in some folder and then copy to the .git folder with some makefile or anythig else.</p>
<p>I was always curious what are those signs that appear in the files in case of a conflict <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code>=========</code>, and <code>>>>>>>>></code>. These are the conflict markers, and the code between <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> and <code>=========</code> is what you have right now. The other half ending in <code>>>>>>>>></code> is what came to you from the server or another branch.</p>
<p><code>git branch --merged</code> shows all the branches that were merged, you can use <code>--no-merged</code> as well.</p>
<p>Lets turn to more adavanced stuff.
In short all commands in git can be divided in two groups:</p>
<ul>
<li>the ones you use every day, e.g. <code>git add</code>, <code>git commit</code> and etc. are called &lsquo;porcelain&rsquo;</li>
<li>other low-level commands like <code>git cat-file</code>, <code>git commit-tree</code> and etc. are called &lsquo;plumbing&rsquo; commands</li>
</ul>
<p>Lets have a look at some of plumbing commands.
First command is <code>hash-object</code>:
with <code>echo 'test content' | git hash-object -w --stdin</code> you&rsquo;ll get hash sum of the content you passed to the hash-object command. So the hash sum is d670460b4b4aece5915caf5c68d12f560a9fe3e4, first two letters are the name of subdirectory and the least files are the name of created file - .git/objects/d6/70460b4b4aece5915caf5c68d12f560a9fe3e4.</p>
<p>By doing <code>git cat-file -p &lt;blob></code> you can get every recoded state of the file.</p>
<p>With <code>git cat-file -p master^{tree}</code> we get the tree which is pointed to by the latest commit. Git tree is essentially the snapshot which contains references to all blobs and sub-trees.
Basically all the magic goes through these commands - <code>git update-index</code> adds the files to the staging area and <code>git write-tree</code> creates the tree.</p>
<p>At last we should create commit object which contains all meta-information on commit.
<code>echo 'first commit' | git commit-tree &lt;SHA-1 of the tree-object></code> will do the trick.</p>
<p>One of the most intriguing topics - data recovery is almost always possible.
Suppose you did <code>git hard --reset &lt;SHA-1></code> for a few commits, and you want it back.
The easiest way is to use <code>git reflog</code> to get the list of your recent actions or <code>git log -g</code> which gives you the more ample info.
Once you get lost commit SHA you can checkout it or create some &lsquo;recovery-branch&rsquo; and that is it!</p>
<p>There is another powerfull command <code>git fsck --full</code> which checks git database for intergrity.</p>
<p>Do you have something to add ? Please comment below.</p>
<p>Links:</p>
<p><a href=http://www.paulboxley.com/blog/2011/06/git-caret-and-tilde>git caret and tilde different</a></p>
</div>
<footer class=post-footer>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://slash3b.github.io>Random notes to myself</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>