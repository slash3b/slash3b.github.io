<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>New features in PHP 7+ | Random notes to myself</title><meta name=keywords content><meta name=description content="This post serves as a reminder, it is so easy to forget things nowadays. So here you go all in one list of PHP 7+ new features.
Beware though, it is not 100% full, but 85-90% I think, I did omit some not-so-important features. I would be so glad if this article helped to save your time.
Changes introduced in 7.0 Scalar type declarations
An option to make PHP more stict on typing."><meta name=author content><link rel=canonical href=https://slash3b.github.io/posts/2017-10-08-php7-new-features/><link crossorigin=anonymous href=/assets/css/stylesheet.min.6f60056d44d3f7eb69a4bc6c332b59960f3a995802bded244750232f33713c49.css integrity="sha256-b2AFbUTT9+tppLxsMytZlg86mVgCve0kR1AjLzNxPEk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://slash3b.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://slash3b.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://slash3b.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://slash3b.github.io/apple-touch-icon.png><link rel=mask-icon href=https://slash3b.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="New features in PHP 7+"><meta property="og:description" content="This post serves as a reminder, it is so easy to forget things nowadays. So here you go all in one list of PHP 7+ new features.
Beware though, it is not 100% full, but 85-90% I think, I did omit some not-so-important features. I would be so glad if this article helped to save your time.
Changes introduced in 7.0 Scalar type declarations
An option to make PHP more stict on typing."><meta property="og:type" content="article"><meta property="og:url" content="https://slash3b.github.io/posts/2017-10-08-php7-new-features/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-10-08T00:00:00+00:00"><meta property="article:modified_time" content="2017-10-08T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="New features in PHP 7+"><meta name=twitter:description content="This post serves as a reminder, it is so easy to forget things nowadays. So here you go all in one list of PHP 7+ new features.
Beware though, it is not 100% full, but 85-90% I think, I did omit some not-so-important features. I would be so glad if this article helped to save your time.
Changes introduced in 7.0 Scalar type declarations
An option to make PHP more stict on typing."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://slash3b.github.io/posts/"},{"@type":"ListItem","position":3,"name":"New features in PHP 7+","item":"https://slash3b.github.io/posts/2017-10-08-php7-new-features/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"New features in PHP 7+","name":"New features in PHP 7\u002b","description":"This post serves as a reminder, it is so easy to forget things nowadays. So here you go all in one list of PHP 7+ new features.\nBeware though, it is not 100% full, but 85-90% I think, I did omit some not-so-important features. I would be so glad if this article helped to save your time.\nChanges introduced in 7.0 Scalar type declarations\nAn option to make PHP more stict on typing.","keywords":[],"articleBody":"This post serves as a reminder, it is so easy to forget things nowadays. So here you go all in one list of PHP 7+ new features.\nBeware though, it is not 100% full, but 85-90% I think, I did omit some not-so-important features. I would be so glad if this article helped to save your time.\nChanges introduced in 7.0 Scalar type declarations\nAn option to make PHP more stict on typing. We have the following types:\nint float string bool Return type declarations\nUp to PHP7.1 the types are:\nclass interface self array callable bool float int stiring iterable Null coalescing operator\nIt is an eleagant way to get rid of isset():\n$test = $_POST['surprise'] ?? 'nothing'; So in case post variable does not exists or it is null, we’ll get the value after ??\nSpaceship operator\necho $x \u003c=\u003e $b; Will return 0 in case variables are equal, -1 if $b is more\\equal to the be and 1 if vise versa.\nAnonymous classes:\nnew class extends SomeOtherClass {} So yeah, it’s an old plain class which can extend, implement and etc.\nUnicode codepoint escape syntax\necho \"\\u{6879}\"; Will output 桹\nClosure::call\nShorthand way to get everything you need from the class.\nCould we say we do not need Reflection any more ?\nclass A {private $x = 42;} print (function(){ return $this-\u003ex;})-\u003ecall(new A); Filtered unserialize function\nNow unserialize have an optional option allowed_classes for better security:\nunserialize($some_string, ['allowed_classes' =\u003e ['MyA', 'MyB']]); Interestingly enough, in case we pass some other class we will get instance of __PHP_Incomplete_Class\nIntlChar\nIntl extension received new class IntlChar, it holds a number of useful method to work with unicode characters.\nFor instance charAge which lets you have a Unicode version when this character was introduced, or charName which well, lets you get char name and etc.\nExpectation\nIt is assert enhancement, previously you could use it like this:\nvar_dump(assert('true !== false')); which would be validated to true or false roughly speaking. But in PHP7 assert() is a language construct so the first parameter - assertion can be an expression and the second parameter can be now of type throwable so we can throw Exception.\nGroup use declaration\nWe can them like this:\nuse some\\namespace\\{ClassA, ClassB, ClassC as C}; Though it kind of contradicts with PSR-4 which does not allow grouping.\nGenerator return expressions\nWith new Generator function getReturn() we may retrieve the final expression like this:\n$gen = (function(){ yield 1; return 'The end' . PHP_EOL; })(); Only when generator is done yielding values, we can use $gen-\u003egetReturn() and see the final result. Pretty handy!\nGenerator delegation\nThe generator can do yield from and suck in other generator, array or any Traversable object.\nThings deprecated:\n{: style=“color:red;” }\nPHP 4 style constructors Static calls to non-static methods calling assert() with string argument password_hash() salt option Changes introduced in 7.1 Nullable types\nNullable type means that along with specified type we can pass or return NULL.\nHere is quite silly but legit example.\nfunction a(?string $line): ?string { return $line; } Void functions\nNew return type void that is used in case we omit return or we do return;\nSymmetric array destructuring\nMeans that now along with classical list() we can do this:\n$data = ['blah', 'ping-pong']; [$first, $second] = $data; $first will be created and equal to ‘blah’ and $second will be equal to’ping-pong’, hence the name - symmetric array destructturing : )\nClass constant visibility\nWell, constants can now be private, protected and public\niterable pseudo-type\nNew return type, similar to callable() - iterable\nOf course it can be user for array or object implemeting Traversable interface\nMulti catch exception handling\nCatch block may now have multiple exceptions specified with pipe | character like this\n... } catch( LigicException | RuntimeException $e) { ... Support for keys in list() or in [] array desctucuring\nlist and symmetric array destructuring support keys, so we can do it like this:\n$data = [ [\"id\" =\u003e 1, \"name\" =\u003e 'Tom'], [\"id\" =\u003e 2, \"name\" =\u003e 'Fred'], ]; list(\"name\" =\u003e $name, \"id\" =\u003e $id) = $data[0]; [\"name\" =\u003e $name, \"id\" =\u003e $id] = $data[0]; Support for negative string offsets\nWith negative offset we can do var_dump(\"testy\"[-1]); and receive y letter.\nAlso all string manipulation function are able to use negative offset as well.\nConvert callables to Closures with Closure::fromCallable()\nAsynchronous signal handling\nHTTP/2 server push support in ext/curl\nThings deprecated:\n{: style=“color:red;” }\nextension ext/mcrypt the e pattern modifier is deprecated for the mb_ereg_replace() and mb_eregi_replace() functions. Changes introduced in 7.2 New object type\nIt can be used as type hint and as return type as well:\nfunction(object $obj): object { return new SplFileInfo(); } Extension loading by name\nNo need to write extension name along with file extension, .so in Unix case.\nAbstract method override\nNow we are able to create child abstact class and override parent’s abstract methods:\nabstract class A { abstract function test(string $s); } abstract class B extends A { abstract function test($s) : int; } password_hash will support Argon2 hashing algorithm\nAll password_...functions have a bunch of ARGON2 constants available to them.\nNew cryptographic extension - Sodium\nobject as type hint and return type\nParameter Type Widening\ninterface A { public function Test(array $input); } class B implements A { public function Test($input){} } Trailing comma is alowed in grouped namespaces\nThings deprecated:\n{: style=“color:red;” }\nunquoted strings in php7.2+ will emir E_WARNING instead of E_NOTICE __autload() deprecated in favor of superior spl_autoload_register() useless (unset) cast create_function() using parse_str() function without second argument each() function due to slowness assert() with string argument Changes introduced in 7.3 ▪ JSON throw on error As fourth parameter json_decode() and json_encode functions receive bitmask of JSON decode options.\nJSON_THROW_ON_ERROR will be added to these options, it wont change behavior of json_last_error() and json_last_error_msg(). With that additional option json_decode() and json_encode functions will throw JsonException.\nThings deprecated:\n{: style=“color:red;” }\nnot yet ","wordCount":"988","inLanguage":"en","datePublished":"2017-10-08T00:00:00Z","dateModified":"2017-10-08T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://slash3b.github.io/posts/2017-10-08-php7-new-features/"},"publisher":{"@type":"Organization","name":"Random notes to myself","logo":{"@type":"ImageObject","url":"https://slash3b.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://slash3b.github.io accesskey=h title="Random notes to myself (Alt + H)">Random notes to myself</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>New features in PHP 7+</h1><div class=post-meta>October 8, 2017</div></header><div class=post-content><p>This post serves as a reminder, it is so easy to forget things nowadays. So here you go all in one list of PHP 7+ new features.</p><p>Beware though, it is not 100% full, but 85-90% I think, I did omit some not-so-important features. I would be so glad if this article helped to save your time.</p><h2 id=changes-introduced-in-70>Changes introduced in 7.0<a hidden class=anchor aria-hidden=true href=#changes-introduced-in-70>#</a></h2><p><strong>Scalar type declarations</strong><br>An option to make PHP more stict on typing. We have the following types:</p><ul><li>int</li><li>float</li><li>string</li><li>bool</li></ul><p><strong>Return type declarations</strong><br>Up to PHP7.1 the types are:</p><ul><li>class</li><li>interface</li><li>self</li><li>array</li><li>callable</li><li>bool</li><li>float</li><li>int</li><li>stiring</li><li>iterable</li></ul><p><strong>Null coalescing operator</strong><br>It is an eleagant way to get rid of isset():</p><pre><code>$test = $_POST['surprise'] ?? 'nothing';
</code></pre><p>So in case post variable does not exists or it is null, we&rsquo;ll get the value after <code>??</code></p><p><strong>Spaceship operator</strong></p><pre><code>echo $x &lt;=&gt; $b;
</code></pre><p>Will return 0 in case variables are equal, -1 if $b is more\equal to the be and 1 if vise versa.</p><p><strong>Anonymous classes:</strong></p><pre><code>new class extends SomeOtherClass
{}
</code></pre><p>So yeah, it&rsquo;s an old plain class which can extend, implement and etc.</p><p><strong>Unicode codepoint escape syntax</strong></p><pre><code>echo &quot;\u{6879}&quot;;
</code></pre><p>Will output 桹</p><p><strong>Closure::call</strong><br>Shorthand way to get everything you need from the class.<br>Could we say we do not need Reflection any more ?</p><pre><code>class A {private $x = 42;} 
print (function(){ return $this-&gt;x;})-&gt;call(new A); 
</code></pre><p><strong>Filtered unserialize function</strong><br>Now unserialize have an optional option <code>allowed_classes</code> for better security:</p><pre><code>unserialize($some_string, ['allowed_classes' =&gt; ['MyA', 'MyB']]);
</code></pre><p>Interestingly enough, in case we pass some other class we will get instance of <code>__PHP_Incomplete_Class</code></p><p><strong>IntlChar</strong><br>Intl extension received new class IntlChar, it holds a number of useful method to work with unicode characters.<br>For instance <code>charAge</code> which lets you have a Unicode version when this character was introduced, or <code>charName</code>
which well, lets you get char name and etc.</p><p><strong>Expectation</strong><br>It is <code>assert</code> enhancement, previously you could use it like this:</p><pre><code>var_dump(assert('true !== false'));
</code></pre><p>which would be validated to true or false roughly speaking. But in PHP7 <code>assert()</code> is a language construct so the first parameter - assertion can be an expression and the second parameter can be now of type <code>throwable</code> so we can throw Exception.</p><p><strong>Group use declaration</strong><br>We can them like this:</p><pre><code>use some\namespace\{ClassA, ClassB, ClassC as C};
</code></pre><p>Though it kind of contradicts with <a href=https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md#2-specification>PSR-4</a> which does not allow grouping.</p><p><strong>Generator return expressions</strong><br>With new Generator function <code>getReturn()</code> we may retrieve the final expression like this:</p><pre><code>$gen = (function(){
    yield 1;
    return 'The end' . PHP_EOL;
})();
</code></pre><p>Only when generator is done yielding values, we can use <code>$gen->getReturn()</code> and see the final result. Pretty handy!</p><p><strong>Generator delegation</strong><br>The generator can do <code>yield from</code> and suck in other generator, array or any Traversable object.</p><p><strong>Things deprecated:</strong><br>{: style=&ldquo;color:red;&rdquo; }</p><ul><li>PHP 4 style constructors</li><li>Static calls to non-static methods</li><li>calling <code>assert()</code> with string argument</li><li>password_hash() salt option</li></ul><h2 id=changes-introduced-in-71>Changes introduced in 7.1<a hidden class=anchor aria-hidden=true href=#changes-introduced-in-71>#</a></h2><p><strong>Nullable types</strong><br>Nullable type means that along with specified type we can pass or return NULL.<br>Here is quite silly but legit example.</p><pre><code>function a(?string $line): ?string
{
    return $line;
}
</code></pre><p><strong>Void functions</strong><br>New return type <code>void</code> that is used in case we omit <code>return</code> or we do <code>return;</code></p><p><strong>Symmetric array destructuring</strong><br>Means that now along with classical <code>list()</code> we can do this:</p><pre><code>$data = ['blah', 'ping-pong'];
[$first, $second] = $data;
</code></pre><p><code>$first</code> will be created and equal to &lsquo;blah&rsquo; and <code>$second</code> will be equal to&rsquo;ping-pong&rsquo;,
hence the name - <em>symmetric array destructturing</em> : )</p><p><strong>Class constant visibility</strong><br>Well, constants can now be <code>private</code>, <code>protected</code> and <code>public</code></p><p><strong>iterable pseudo-type</strong><br>New return type, similar to <code>callable()</code> - <code>iterable</code><br>Of course it can be user for array or object implemeting <code>Traversable</code> interface</p><p><strong>Multi catch exception handling</strong><br>Catch block may now have multiple exceptions specified with pipe <code>|</code> character like this</p><pre><code>...
} catch( LigicException | RuntimeException $e) {
...
</code></pre><p><strong>Support for keys in list() or in [] array desctucuring</strong><br><code>list</code> and symmetric array destructuring support keys, so we can do it like this:</p><pre><code>$data = [
    [&quot;id&quot; =&gt; 1, &quot;name&quot; =&gt; 'Tom'],
    [&quot;id&quot; =&gt; 2, &quot;name&quot; =&gt; 'Fred'],
];

list(&quot;name&quot; =&gt; $name, &quot;id&quot; =&gt; $id) = $data[0];

[&quot;name&quot; =&gt; $name, &quot;id&quot; =&gt; $id] = $data[0];
</code></pre><p><strong>Support for negative string offsets</strong><br>With negative offset we can do <code>var_dump("testy"[-1]);</code> and receive y letter.<br>Also all <a href=http://php.net/manual/en/book.strings.php>string manipulation function</a> are able to use negative offset as well.</p><p><strong>Convert callables to Closures with Closure::fromCallable()</strong></p><p><strong>Asynchronous signal handling</strong></p><p><strong>HTTP/2 server push support in ext/curl</strong></p><p><strong>Things deprecated:</strong><br>{: style=&ldquo;color:red;&rdquo; }</p><ul><li>extension ext/mcrypt</li><li>the <em>e</em> pattern modifier is deprecated for the mb_ereg_replace() and mb_eregi_replace() functions.</li></ul><h3 id=changes-introduced-in-72>Changes introduced in 7.2<a hidden class=anchor aria-hidden=true href=#changes-introduced-in-72>#</a></h3><p><strong>New object type</strong><br>It can be used as type hint and as return type as well:</p><pre><code>function(object $obj): object {
    return new SplFileInfo();
}
</code></pre><p><strong>Extension loading by name</strong><br>No need to write extension name along with file extension, <em>.so</em> in Unix case.</p><p><strong>Abstract method override</strong><br>Now we are able to create child abstact class and override parent&rsquo;s abstract methods:</p><pre><code>abstract class A
{
    abstract function test(string $s);
}
abstract class B extends A
{
    abstract function test($s) : int;
}
</code></pre><p><strong>password_hash will support Argon2 hashing algorithm</strong><br>All <code>password_...</code>functions have a bunch of ARGON2 constants available to them.</p><p><strong>New cryptographic extension - Sodium</strong></p><p><strong>object as type hint and return type</strong></p><p><strong>Parameter Type Widening</strong></p><pre><code>interface A
{
        public function Test(array $input);
}

class B implements A
{
        public function Test($input){}
}
</code></pre><p><strong>Trailing comma is alowed in grouped namespaces</strong></p><p><strong>Things deprecated:</strong><br>{: style=&ldquo;color:red;&rdquo; }</p><ul><li>unquoted strings in php7.2+ will emir E_WARNING instead of E_NOTICE</li><li><code>__autload()</code> deprecated in favor of superior <code>spl_autoload_register()</code></li><li>useless <code>(unset)</code> cast</li><li><code>create_function()</code></li><li>using <code>parse_str()</code> function without second argument</li><li><code>each()</code> function due to slowness</li><li><code>assert()</code> with string argument</li></ul><h3 id=changes-introduced-in-73>Changes introduced in 7.3<a hidden class=anchor aria-hidden=true href=#changes-introduced-in-73>#</a></h3><p>▪ <strong>JSON throw on error</strong><br>As fourth parameter <code>json_decode()</code> and <code>json_encode</code> functions receive bitmask of JSON decode options.<br><code>JSON_THROW_ON_ERROR</code> will be added to these options, it wont change behavior of <code>json_last_error()</code> and <code>json_last_error_msg()</code>.
With that additional option <code>json_decode()</code> and <code>json_encode</code> functions will throw <code>JsonException</code>.</p><p><strong>Things deprecated:</strong><br>{: style=&ldquo;color:red;&rdquo; }</p><ul><li>not yet</li></ul></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://slash3b.github.io>Random notes to myself</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>