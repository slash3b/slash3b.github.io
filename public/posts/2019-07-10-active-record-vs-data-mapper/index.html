<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Active record vs. Data Mapper | Random notes to myself</title><meta name=keywords content><meta name=description content="In Object-oriented programming we often need to persist object to the database for later retrieval. For that to work smart people invented Object-Relation Mapper that does object to db conversion and vise versa. Such ORM object are usually called entities and are passed around in application and are subject to CRUD operations.
ORM implies existence of DBAL(Database Abstraction Layer) and Data Access Layer.
 DBAL abstracts Quering language details of different databases and supports many databases at once."><meta name=author content><link rel=canonical href=https://slash3b.github.io/posts/2019-07-10-active-record-vs-data-mapper/><link crossorigin=anonymous href=/assets/css/stylesheet.min.61dfb3f0b4cda95d2ccb867f9a3b244ce5d23e12492bcc3c277df594c7bc1adf.css integrity="sha256-Yd+z8LTNqV0sy4Z/mjskTOXSPhJJK8w8J331lMe8Gt8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><link rel=icon href=https://slash3b.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://slash3b.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://slash3b.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://slash3b.github.io/apple-touch-icon.png><link rel=mask-icon href=https://slash3b.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.68.3"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: rgb(29, 30, 32);--entry: rgb(46, 46, 51);--primary: rgb(218, 218, 219);--secondary: rgb(155, 156, 157);--tertiary: rgb(65, 66, 68);--content: rgb(196, 196, 197);--hljs-bg: rgb(46, 46, 51);--code-bg: rgb(55, 56, 62);--border: rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Active record vs. Data Mapper"><meta property="og:description" content="In Object-oriented programming we often need to persist object to the database for later retrieval. For that to work smart people invented Object-Relation Mapper that does object to db conversion and vise versa. Such ORM object are usually called entities and are passed around in application and are subject to CRUD operations.
ORM implies existence of DBAL(Database Abstraction Layer) and Data Access Layer.
 DBAL abstracts Quering language details of different databases and supports many databases at once."><meta property="og:type" content="article"><meta property="og:url" content="https://slash3b.github.io/posts/2019-07-10-active-record-vs-data-mapper/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-07-10T00:00:00+00:00"><meta property="article:modified_time" content="2019-07-10T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Active record vs. Data Mapper"><meta name=twitter:description content="In Object-oriented programming we often need to persist object to the database for later retrieval. For that to work smart people invented Object-Relation Mapper that does object to db conversion and vise versa. Such ORM object are usually called entities and are passed around in application and are subject to CRUD operations.
ORM implies existence of DBAL(Database Abstraction Layer) and Data Access Layer.
 DBAL abstracts Quering language details of different databases and supports many databases at once."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":3,"name":"Active record vs. Data Mapper","item":"https://slash3b.github.io/posts/2019-07-10-active-record-vs-data-mapper/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Active record vs. Data Mapper","name":"Active record vs. Data Mapper","description":"In Object-oriented programming we often need to persist object to the database for later retrieval. For that to work smart people invented Object-Relation Mapper that does object to db conversion and vise versa. Such ORM object are usually called entities and are passed around in application and are subject to CRUD operations.\nORM implies existence of DBAL(Database Abstraction Layer) and Data Access Layer.\n DBAL abstracts Quering language details of different databases and supports many databases at once.","keywords":[],"articleBody":"In Object-oriented programming we often need to persist object to the database for later retrieval. For that to work smart people invented Object-Relation Mapper that does object to db conversion and vise versa. Such ORM object are usually called entities and are passed around in application and are subject to CRUD operations.\nORM implies existence of DBAL(Database Abstraction Layer) and Data Access Layer.\n DBAL abstracts Quering language details of different databases and supports many databases at once. Theoretically you can switch seamlessly from one database to another, though I never heard of practical execution of this feature. Active record and Data Mapper are Data Access Layer patterns or better to say paradigms.  ORM advantages:\n Most of the time you do not have to write SQL, ORM does that for you behind the scenes Entities are very flexible, you can pass them around, change and when needed persist More clean domain visibility - you have an entity filled with values and comments and annotations and lots of functionality provided by e.g. EntityManager. This lets you abstract away from SQL and operate on domain level  ORM disadvantages:\n ORM may be suboptimal in efficiency - internal conversion and compilation to SQL takes time, also ORM could do multiple inefficient queries instead of one e.g. N+1 problem It may be very difficult to write complex queries with ORM tooling, actually ORM can not compete with SQL on this field ORMs are also called “leaky abstractions” which means that even though you abstract away from low level details, SQL, you still need to understand what is going on a low level in order to use abstraction efficiently.  Active record According to Martin Fowler Active Directory is:\n An object that wraps a row in a database table or view, encapsulates the database access, and adds domain logic on that data. Object carries both data and behavior.\n My interpretaion in plain english:\n Active Record implies that an entity represents a table from database and each instance of an entity represents one row from the table, also that entity contains not only data but also all methods/operations to deal with that data. So it typically contains CRUD methods like save(), delete(), update(), find() and etc.\n Examples of AR:\n Ruby on Rails Laravel’s Eloquent Propel (Symfony) Yii Active Record Django’s ORM  Older version of Doctrine ORM did follow Active Record pattern and an entity was created and saved this way: {% highlight php %}\n","wordCount":"405","inLanguage":"en","datePublished":"2019-07-10T00:00:00Z","dateModified":"2019-07-10T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://slash3b.github.io/posts/2019-07-10-active-record-vs-data-mapper/"},"publisher":{"@type":"Organization","name":"Random notes to myself","logo":{"@type":"ImageObject","url":"https://slash3b.github.io/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><header class=header><nav class=nav><div class=logo><a href=https://slash3b.github.io accesskey=h title="Random notes to myself (Alt + H)">Random notes to myself</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Active record vs. Data Mapper</h1><div class=post-meta>July 10, 2019</div></header><div class=post-content><p>In Object-oriented programming we often need to persist object to the database for later retrieval. For that to work smart people invented Object-Relation Mapper that does object to db conversion and vise versa. Such ORM object are usually called <em>entities</em> and are passed around in application and are subject to CRUD operations.</p><p>ORM implies existence of DBAL(Database Abstraction Layer) and Data Access Layer.</p><ul><li>DBAL abstracts Quering language details of different databases and supports many databases at once. Theoretically you can switch seamlessly from one database to another, though I never heard of practical execution of this feature.</li><li><em>Active record</em> and <em>Data Mapper</em> are Data Access Layer patterns or better to say paradigms.</li></ul><p>ORM advantages:</p><ul><li>Most of the time you do not have to write SQL, ORM does that for you behind the scenes</li><li>Entities are very flexible, you can pass them around, change and when needed persist</li><li>More clean domain visibility - you have an entity filled with values and comments and annotations and lots of functionality provided by e.g. EntityManager. This lets you abstract away from SQL and operate on domain level</li></ul><p>ORM disadvantages:</p><ul><li>ORM may be suboptimal in efficiency - internal conversion and compilation to SQL takes time, also ORM could do multiple inefficient queries instead of one e.g. N+1 problem</li><li>It may be very difficult to write complex queries with ORM tooling, actually ORM can not compete with SQL on this field</li><li>ORMs are also called &ldquo;leaky abstractions&rdquo; which means that even though you abstract away from low level details, SQL, you still need to understand what is going on a low level in order to use abstraction efficiently.</li></ul><h1 id=active-record>Active record<a hidden class=anchor aria-hidden=true href=#active-record>#</a></h1><p>According to <a href=https://martinfowler.com/eaaCatalog/activeRecord.html>Martin Fowler</a> Active Directory is:</p><blockquote><p>An object that wraps a row in a database table or view, encapsulates the database
access, and adds domain logic on that data. Object carries both data and behavior.</p></blockquote><p>My interpretaion in plain english:</p><blockquote><p>Active Record implies that an entity represents a table from database and each
instance of an entity represents one row from the table, also that entity contains
not only data <strong>but</strong> also all methods/operations to deal with that data. So it
typically contains CRUD methods like <code>save()</code>, <code>delete()</code>, <code>update()</code>, <code>find()</code> and etc.</p></blockquote><p>Examples of AR:</p><ul><li>Ruby on Rails</li><li>Laravel’s Eloquent</li><li>Propel (Symfony)</li><li>Yii Active Record</li><li>Django’s ORM</li></ul><p>Older version of Doctrine ORM did follow Active Record pattern and an entity was created and saved this way:
{% highlight php %}</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://slash3b.github.io>Random notes to myself</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z" /></svg></a><script>let menu=document.getElementById('menu')
menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>