<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to send request to UNIX socket | Random notes to myself</title>
<meta name=keywords content><meta name=description content="This is one of those notes to myself, so I can remmber it better or find it later more easy.
I was recently strugging with permission problem for the unix socket, the mistake was quite silly - I did not turn permission bit on for the folder with socket file. And before I found the solution I tried to debug socket and I found that you can curl socket with"><meta name=author content><link rel=canonical href=https://localhost:1313/posts/2019-05-12-debud-unix-socket/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=https://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=https://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://localhost:1313/posts/2019-05-12-debud-unix-socket/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="How to send request to UNIX socket"><meta property="og:description" content="This is one of those notes to myself, so I can remmber it better or find it later more easy.
I was recently strugging with permission problem for the unix socket, the mistake was quite silly - I did not turn permission bit on for the folder with socket file. And before I found the solution I tried to debug socket and I found that you can curl socket with"><meta property="og:type" content="article"><meta property="og:url" content="https://localhost:1313/posts/2019-05-12-debud-unix-socket/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-05-12T00:00:00+00:00"><meta property="article:modified_time" content="2019-05-12T00:00:00+00:00"><meta property="og:site_name" content="Random notes to myself"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to send request to UNIX socket"><meta name=twitter:description content="This is one of those notes to myself, so I can remmber it better or find it later more easy.
I was recently strugging with permission problem for the unix socket, the mistake was quite silly - I did not turn permission bit on for the folder with socket file. And before I found the solution I tried to debug socket and I found that you can curl socket with"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"How to send request to UNIX socket","item":"https://localhost:1313/posts/2019-05-12-debud-unix-socket/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to send request to UNIX socket","name":"How to send request to UNIX socket","description":"This is one of those notes to myself, so I can remmber it better or find it later more easy.\nI was recently strugging with permission problem for the unix socket, the mistake was quite silly - I did not turn permission bit on for the folder with socket file. And before I found the solution I tried to debug socket and I found that you can curl socket with","keywords":[],"articleBody":"This is one of those notes to myself, so I can remmber it better or find it later more easy.\nI was recently strugging with permission problem for the unix socket, the mistake was quite silly - I did not turn permission bit on for the folder with socket file. And before I found the solution I tried to debug socket and I found that you can curl socket with\ncurl --unix-socket /full/path/to/the/socket/socket.sock host_name In my case the socket file was created by gunicorn and host name did not have any meaning, dunno why, you could put there blah and it worked just fine. So curl should return you the proper respons. But I was wondern how one could send request to the socket manually and I found this handy snippet\nProbably it works like this on Mac but it did not work for me on Ubuntu, in the comments section I found that you have to put extra \\r\\n sequence in the request. The whole \\r\\n\\r\\n sequence signify end of your request.\nSo the final command for me is\necho -e \"GET / HTTP/1.0\\r\\n\\r\\n\" | nc -U /var/www/patria/flask/pirata.sock Pay attention to the -e argument it interprets all the escape characters in the string.\n","wordCount":"204","inLanguage":"en","datePublished":"2019-05-12T00:00:00Z","dateModified":"2019-05-12T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://localhost:1313/posts/2019-05-12-debud-unix-socket/"},"publisher":{"@type":"Organization","name":"Random notes to myself","logo":{"@type":"ImageObject","url":"https://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=https://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://localhost:1313/archives/ title=archives><span>archives</span></a></li><li><a href=https://localhost:1313/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">How to send request to UNIX socket</h1><div class=post-meta><span title='2019-05-12 00:00:00 +0000 UTC'>May 12, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;204 words&nbsp;|&nbsp;<a href=https://github.com/slash3b/slash3b.github.io/content/posts/2019-05-12-debud-unix-socket.markdown rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>This is one of those notes to myself, so I can remmber it better or find it later more easy.</p><p>I was recently strugging with permission problem for the unix socket, the mistake was quite silly - I did not turn permission bit on for the folder with socket file. And before I found the solution I tried to debug socket and I found that you can curl socket with</p><pre tabindex=0><code>curl --unix-socket /full/path/to/the/socket/socket.sock host_name
</code></pre><p>In my case the socket file was created by gunicorn and host name did not have any meaning, dunno why, you could put there blah and it worked just fine. So curl should return you the proper respons. But I was wondern how one could send request to the socket manually and I found this handy snippet</p><p>Probably it works like this on Mac but it did not work for me on Ubuntu, in the comments section I found that you have to put extra <code>\r\n</code> sequence in the request. The whole <code>\r\n\r\n</code> sequence signify end of your request.</p><p>So the final command for me is</p><pre tabindex=0><code>echo -e &#34;GET / HTTP/1.0\r\n\r\n&#34; | nc -U /var/www/patria/flask/pirata.sock
</code></pre><p>Pay attention to the <code>-e</code> argument it interprets all the escape characters in the string.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://localhost:1313/posts/2019-05-30-ashamed/><span class=title>« Prev</span><br><span>Mixed feelings about being programmer in Moldova</span>
</a><a class=next href=https://localhost:1313/posts/2019-04-30-streams_redirection/><span class=title>Next »</span><br><span>Stream redirection tl;dr</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://localhost:1313/>Random notes to myself</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>